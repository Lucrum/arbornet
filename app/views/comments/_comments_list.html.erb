<div class="comments">
  <%# this is to compensate for the "fake" comment generated by the comment form %>
  <% valid_comments = commentable.comments.where.not(id: nil) %>

  <% if valid_comments.any? %>
    <h4>Comments</h4>
    <ol>
      <% valid_comments.each do |comment| %>
        <li class="comment">
          <p><%= link_to comment.creator.username, profile_path(comment.creator.username) %> - <%= render "shared/time_ago", item: comment %></p>
          <p><%= comment.content %></p>
          <% if comment.creator == current_user %>
            <%= link_to "Edit", edit_polymorphic_path([commentable, comment]) %>
            <%= link_to "Delete", polymorphic_path([commentable, comment]), data: {
              turbo_method: :delete,
              turbo_confirm: "Are you sure you want to delete this comment?"
            } %>
          <% end %>
        </li>
      <% end %>
    </ol>
  <% end %>
</div>